---
layout: post
title: Transparency Is Key - A Case Study
comments: true
tags: [Architecture, Microservices, SOA, Agile]
---

Agile practices preach transprancy within and outside a team. It builds trust, empowers and motivates the team. In my exprience there is nothing more deflating and morale zapping to a team than lack of transparency, communication and trust. In this post, I will present my views on a recent project that I worked on that I considered a failure, why I think it failed and lessons learned.

Around a year ago, I joined a company to work on a SaaS system. This was a re-write of the company's flagship product as it has become a monumental piece of unmaintainable, incomprehinsible code and architecture. This meant the company could neither react to market changes nor release bug fixes and updates in an acceptable timeframe. They resorted to actually asking customers to give them access to their production environements in order to "fix the issues". I have not seen the code myself but the tales of the ingenious hacks were almost legendary in the office. Additionally, new releases had to be done over the weekend and it took around two days to release a version of the software and it entailed numerous untraceable, untestable manual steps that resulted in releases that were generally buggy as the software had no kind of automated tests and was just tossed over to the QAs before release.

Needless to say, a complete re-write was unavoidable. But a mere code revision would likely be a long and winding road back to square one. What was really needed was an overhaul of the software practices and they way the business viewed software development, release management, product management, marketing, sales, etc. Thankfully, the business came to the same conclusion and started a recruitment drive to get the right people in. There were a lot of teething issues at the start but progress was slowly being made. 

I joined the company shortly after it started embracing agile so the developers that joined before me set the stage and commenced using Continuous Integration, Pair Programming, TDD, BDD as well as all the Scrum ceremonies. The benefits were great and it was felt, and appreciated, throughout the business. This was never more apparent than when an external evaluator visited the office to assess the conformity of an implementation we did to their contract. The external evaluator was running through a series of tests and marking them either passed/failed. The business was used to failing these kind of evaluations whenever there is a single failure as they were not equipped to fix the issues and re-release in a timely fashion. The team managed to make over 30 releases that day, fixng all the problem identified by the evaluator and passing the test. This was unheard of at this company and, hence, the business realised that there is method in the madness and maybe, just maybe, these new recruits knew what they were doing. And that bought us invaluable amount of leeway to take ownership of the upcoming re-write.

The re-write did not start off as smoothly as excpected. It was as if someone higher up was putting pressure to just begin something as requirements were fuzzy at best. Developers were plucked away from other projects and basically told to sit in a room and come up with functional requirements on the fly for a system that, at that point in time, had no target industry, no locked-down set of functionality, no project plan, no requirements in terms of security, auditability, performance, capacity, availability, reliability, etc... When pressed the product owners would just come up with unrealistic figures off the top of their heads.

Eventually, the product owners - like every non-technical PO/BA, decided that it is a good idea to play it safe, they reckoned, by demanding the maximum of everything. So the system should support hundreds of thousands of users as a start, must have five nines (99.999%) availability, must be highly scalable, should have no downtime during release/updates and everything in the system should be configurable (including UI screens, workflows, etc..). Understandably, we pushed back very hard as building such a system, if it could be built, in the timescales proposed is nigh on impossible. We especially detested the "everything is configurable" requirement as this is the reason why we were doing this re-write in the first place. Anyway, we had to settle for a compromise as we could not just alter all the proposed requirements. Granted we should have pushed harder but the only functionality we were able to eliminate was the configurability.

Based on the above requirements, we decided Service Oriented Architecture (SOA) was a good fit as it would give us vertical scalability, allows us to support a very high number of users, eliminates downtime for releases, reduces time to market. This left us with the 99.999% availability, which meant that we cannot rely on a single cloud provider as none of them (at least none that I am aware of) gives that guarantee. In light of that, we decided to not have any direct dependency on any of the cloud providers, hence, using Azure Service Bus or Azure Table Storage was out of the question. 

> Note: there are more reasons as discussed in [this](www.ashrafmageed.com/) earlier post

Basically, the product requirements necessitated the architectural decisions and this was communicated to the buiness during the early phases of the project as well as during the demonstrations at the end of every 2-week sprint. However, a lot of agile practitioners out there forget that in order of agile to work effectively, transparency should be considered a two-way street. The team was never united but this was mainly because the product owners decided not to share many decisions with the rest of the team. We were taken by surprise during demos and other meeting with decisions and commitments that were made without the consensus of the team. The first of the agile manifestos stresses focus on "Individuals and their Interactions" but unfortunately there is this misconception that this simply means more irrelevant meetings and hollow speeches. I am a big believer that a good agile team must be built on respect, trust and transparency and that communication problems will considerably slow the project and could potentially lead to outright projects failure if not tackled swiftly.

> Studies of "communication saturation" during one project showed that, when no communication problems exist, teams can perform 50 times better than the industry average. Jeff Sutherland

In my humble opinion, "Individuals and their Interactions" means:
- everyone's opinion counts regardless of titles and positions
- honesty when communicating with all members of the team not just a select few
- transparency in all decisions and actions
- all members will defend and help the team
- all members share a goal and work towards that goal
- team fosters contructive criticism and positive conflict

Our team lacked in several of these points, which lead to division within the team that the product owners fed on to push their own agenda. There was an insane amount of politics in play and the team lost sight of its goal and stopped functioning as a unit. The team was fractured and groups within the team started having different goals.

Additionally, there were at least three different product owners in the team. On operated behind the scenes while the other two were on completely different pages. The team was getting mixed expectations and ever changing goals. This was so bad that it got to a stage where both were not sure what they want from the team and both pushing the team into completely opposite directions. Time was wasted navigating blind alleys and chasing dead-ends. 

There was no sense of team when it came to product owners, they failed to recognize how they fit in an agile team and started taking the mantle of old school project managers. They stopped discussing the direction of the product with the development team and started making decision and coming up with solutions within themselves. The relationship became akin to parents ordering their children what to do and how.This, naturally, lead to, among other things, another collosal time waste as they came up with technically unfeasible solutions that the development team, to put it mildly picked enormous holes in. Technical people are hired to solve technical problems, therefore, it is crucial that POs present these problems to the team and give them developers ownership of the solutions. This does not mean that the POs should not be involved, it just emphasise that the POs should not provide solutions but engage the team in the technical problems they are trying to resolve. Spotify, for example, recognises this and they simple present the problems to the teams, which have complete control of how to fix it. Basically, people should be allowed to do the jobs they were hired to do.

A number of people left the company, some recognised the signs and left early while others stayed until their positions were no longer tenable. The effect was huge as the company lost not just the domain expertise but the architecture vision, reasoning and direction and without this they could not continue on the same track; hence, another re-write soon ensued. But in order to justify another re-write a scapegoat had to be found; and what better way to find a scapegoat that to blame it on people who are no longer there to defend there decisions. In the next post, I will discuss what decisions were made, why and lessons learned.
